<!DOCTYPE html>
<html lang="es-MX">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Paciente - DermaTotal</title>
    <link rel="stylesheet" href="/fonts/Fuentes.css" />
    <link rel="stylesheet" href="/css/InfoPaciente.css" />
    <link rel="stylesheet" href="/css/EstiloGlobal.css" />
    <link rel="icon" href="/img/favicon.ico" />
    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
    <script src="https://printjs-4de6.kxcdn.com/print.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="/js/navbar.js"></script>
    <script src="/js/infoPaciente/General.js"></script>
    <script src="/js/infoPaciente/Historial.js"></script>
    <script src="/js/infoPaciente/Recetas.js"></script>
    <script src="/js/infoPaciente.js"></script>
  </head>

  <body>
    <%
    //==================================================================================================
    //La vista de carga
    //==================================================================================================
    %>
    <div id="LoadingLogo">
      <img src="/img/Logo.svg" alt="DermaTotal Logo" />
    </div>
    <%
    //==================================================================================================
    //El nav superior para todos
    //==================================================================================================
    %>
    <div class="main-header">
      <a href="/Dashboard"><img src="/img/LogoB.svg" alt="" class="Logo" /></a>
    </div>
    <div class="DropMenu">
      <% //Aqui se genera el DropMenu para todos los usuarios %>
    </div>

    <section class="nav-bar">
      <!-- Aqui se generan los elementos del nav dependiendo del tipo de usuario -->
    </section>

    <% 
    //==================================================================================================
    // Contenido Busqueda de pacientes --> 
    //==================================================================================================
    %>
    <%//Crea la vista de opciones la cual, en un inicio estará oculta%>
    <div id="Cont_Opciones">
      <div id="Opciones">
        <h1 id="TituloOpciones">Cargando Titulo de Opciones...</h1>
        <p id="MensajeOpciones">Cargando Mensaje de las opciones...</p>
        <div class="InfoOpciones"><%//El contenido de rellena con JS%></div>
      </div>
    </div>
    <!-- Aqui comienza el Contenido de la informacion del paciente -->
    <div class="app">
      <main class="app__content">
        <header class="page__header">
          <div class="contfotousuario">
            <img class="fotousuario"alt="Foto Paciente">
          </div>
          <div>
            <div class="NombrePaciente">
             <h1 class="Nombre">Cargando Nombre...<br><h1 class="Apellido">Cargando Apellidos...</h1></h1>
             <input type="text" name="Nombre" id="Nombre" placeholder="Nombre" style="display: none;">
             <input type="text" name="ApellidoP" id="ApellidoP" placeholder="Apellido Paterno" style="display: none;">
             <input type="text" name="ApellidoM" id="ApellidoM" placeholder="Apellido Materno" style="display: none;">
             <h3 class="Eda">Edad: <span class="Edad">Cargando edad...</span> años</h3>
             <h3 class="Alerg">Alergias: <span class="Alergias">No hay alergias</span></h3>
             <input type="text" name="Alergias" id="Alergias" placeholder="Alergias (Opcional)" style="display: none;">
            </div>
            <br>
          </div>
          <ul class="page__controls">
            <!-- <li><button class="TerminarConsulta">Terminar Consulta</button></li> -->
            <li><button class="page__controlbtn--split">Informacion</button></li>
            <div class="infogroup">
              <h3>Datos DermaTotal:</h3>
                <div class="info">
                  <div class="info__item">
                    <div class="info__item__content">
                      <header class="info__item__header">
                        <h3 class="info__item__title">Status:</h3>
                        <button class="iconbtn--edit" id="editarStatus"></button>
                        <button class="iconbtn--cancelar" id="cancelarStatus" style="display:none;"></button>
                        <button class="iconbtn--confirm" id="confirmarStatus" style="display:none;">Confirmar</button>
                      </header>
                      <p id="textStatus">${
                        (await datosAlmacenados.DatosDT[0].Status) || "Cargando Status..."
                      }</p>
                      <select name="inputStatus" id="inputStatus" style="display:none;" >
                      </select>
                    </div>
                  </div>
                </div>
                <div class="info">
                  <div class="info__item">
                    <div class="info__item__content">
                      <header class="info__item__header">
                        <h3 class="info__item__title">Usuario:</h3>
                        <button class="iconbtn--passrestart" id="PassRestart">Reinciar Contraseña</button>
                        </header>
                        <p>${
                          (await datosAlmacenados.DatosDT[0].Usuario) ||
                          "Usuario no disponible"
                        }</p>
                    </div>
                  </div>
                </div>
                <div class="info">
                  <div class="info__widget"></div>
                </div>
                <div class="info">
                  <div class="info__item">
                    <div class="info__item__content">
                      <header class="info__item__header">
                        <h3 class="info__item__title">Alta Por:</h3>
                      </header>
                      <div class="avatar">
                        <div class="avatar__icon">
                          <img src="/img/UserIco.webp" alt="Nicholas Cage" />
                        </div>
                        <p>
                        ${
                          (await datosAlmacenados.DatosDT[0].AltaPor) ||
                          "Usuario no disponible"
                        } <span class="avatar__role"> 
                        ${
                          (await datosAlmacenados.DatosDT[0].TipoUsuarioAlta) ||
                          "Tipo de usuario no disponible"
                        }</span>
                        </p>
                      </div>
                    </div>
                  </div>
                  <div class="info__item">
                    <div class="info__item__content">
                      <header class="info__item__header">
                        <h3 class="info__item__title">El dia:</h3>
                      </header>
                      <p>${
                        (await datosAlmacenados.DatosDT[0].FechaAlta) ||
                        "Cargando fecha de alta..."
                      }</p>
                    </div>
                  </div>
                </div>
              </div>          
          </ul>
        </header>
    
        
        <div class="regions">
          <section class="region">
            <header class="region__header">
              <ul class="tablist">
                <li><a id="General" class="tablist__link">General</a></li>
                <li><a id="Historial" class="tablist__link">Historial</a></li>
                <li><a id="Recetas" class="tablist__link">Recetas</a></li>
              </ul>
            </header>
            <div id="infocontenido">
              <!-- Contenido generado con AJAX -->
            </div>
          </div>
        </section>
      </div>
    </main>
  </div>
    <% // Copyright%>
    <div class="footer">
      <% // Aqui va el contenido del Footer%>
    </div>
  </body>
</html>
